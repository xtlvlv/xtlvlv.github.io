<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/head.jpeg">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xtlvlv.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":2,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="一、第三方模块1. virtualenv virtualenv就是用来为一个应用创建一套“隔离”的Python运行环境。 用pip安装的包都被安装到新建的环境下，系统Python环境不受任何影响">
<meta property="og:type" content="article">
<meta property="og:title" content="python进阶">
<meta property="og:url" content="https://xtlvlv.github.io/python%E8%BF%9B%E9%98%B6/index.html">
<meta property="og:site_name" content="不知自己无知">
<meta property="og:description" content="一、第三方模块1. virtualenv virtualenv就是用来为一个应用创建一套“隔离”的Python运行环境。 用pip安装的包都被安装到新建的环境下，系统Python环境不受任何影响">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-01-06T02:57:34.000Z">
<meta property="article:modified_time" content="2021-01-06T03:01:44.793Z">
<meta property="article:author" content="不知自己无知">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://xtlvlv.github.io/python%E8%BF%9B%E9%98%B6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>python进阶 | 不知自己无知</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">

<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<!-- require MetingJS-->

<script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script> 

  <!--pjax：防止跳转页面音乐暂停-->
 <script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script>
  
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">不知自己无知</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">53</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">57</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xtlvlv.github.io/python%E8%BF%9B%E9%98%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpeg">
      <meta itemprop="name" content="不知自己无知">
      <meta itemprop="description" content="以阅读为生是一件很酷的事，以写作为生是一件更酷的事。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不知自己无知">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python进阶
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-06 10:57:34 / 修改时间：11:01:44" itemprop="dateCreated datePublished" datetime="2021-01-06T10:57:34+08:00">2021-01-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">评论数：</span>
    
    <a title="valine" href="/python%E8%BF%9B%E9%98%B6/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/python%E8%BF%9B%E9%98%B6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>24k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>22 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="一、第三方模块"><a href="#一、第三方模块" class="headerlink" title="一、第三方模块"></a>一、第三方模块</h1><h3 id="1-virtualenv"><a href="#1-virtualenv" class="headerlink" title="1. virtualenv"></a>1. virtualenv</h3><ul>
<li>virtualenv就是用来为一个应用创建一套“隔离”的Python运行环境。</li>
<li>用pip安装的包都被安装到新建的环境下，系统Python环境不受任何影响<a id="more"></a></li>
<li>使用<ul>
<li>安装<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install virtualenv</span><br></pre></td></tr></table></figure></li>
<li>创建环境<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --no-site-packages venv</span><br><span class="line">&#x2F;&#x2F;no-site-packages指的是系统pip的不复制过去，建立一个纯净的python环境</span><br><span class="line">&#x2F;&#x2F;例如Anocanda一个环境，Django单独安装一个环境</span><br><span class="line">&#x2F;&#x2F;有些想用python2，有些用python3，都可以用虚拟环境解决</span><br></pre></td></tr></table></figure></li>
<li>使用环境<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source venv&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>
<h3 id="2-Tkinter图形库"><a href="#2-Tkinter图形库" class="headerlink" title="2. Tkinter图形库"></a>2. Tkinter图形库</h3></li>
</ul>
</li>
<li>Python提供了多个图形界面的库，如：<ul>
<li>Tkinter： Python标准内置库，能在大多数Unix平台下使用</li>
<li>wxPython： 开源软件    </li>
<li>Jython： 和java有关的一种</li>
<li>PyQT：  和QT有关的一种</li>
</ul>
</li>
</ul>
<h1 id="二、文件操作"><a href="#二、文件操作" class="headerlink" title="二、文件操作"></a>二、文件操作</h1><h3 id="1-读文件"><a href="#1-读文件" class="headerlink" title="1. 读文件"></a>1. 读文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1. open file</span><br><span class="line">    open(path,flag[,encoding][,errors])</span><br><span class="line">        path:路径</span><br><span class="line">        flag:打开方式</span><br><span class="line">#常用       r   只读，文件描述符放在文件开头</span><br><span class="line">#常用       rb  只读，文件描述符放在文件开头，以二进制格式打开</span><br><span class="line">            r+  读写，文件描述符放在文件开头</span><br><span class="line">#常用       w   只写，若文件已存在会覆盖，不存在则创建</span><br><span class="line">#常用       wb  打开一个文件只用于写入二进制</span><br><span class="line">            w+  打开一个文件用于读写</span><br><span class="line">            a   追加，若文件存在，文件描述符放在末尾</span><br><span class="line">            a+</span><br><span class="line">            encoding:编码方式</span><br><span class="line">            errors:错误处理</span><br><span class="line">2. operate file</span><br><span class="line">3. close file</span><br><span class="line"></span><br><span class="line">4. 注意</span><br><span class="line">    打开文件后，要注意文件描述符的位置</span><br></pre></td></tr></table></figure>

<ul>
<li>打开文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">path&#x3D;r&quot;C:\Users\test.txt&quot;   #文件并不存在</span><br><span class="line">f&#x3D;open(path,&quot;r&quot;)</span><br><span class="line">#f&#x3D;open(path,&quot;r&quot;,encoding&#x3D;&quot;utf-8&quot;,error&#x3D;&quot;ignole&quot;)   ignole指忽略错误</span><br></pre></td></tr></table></figure></li>
<li>读文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">##1. 读全部</span><br><span class="line">str1&#x3D;f.read()   #常用</span><br><span class="line"></span><br><span class="line">##2. 读10字节</span><br><span class="line">str2&#x3D;f.read(10)</span><br><span class="line"></span><br><span class="line">##3. 读整行</span><br><span class="line">str3&#x3D;f.readline()   #常用</span><br><span class="line">str4&#x3D;f.readline(10)     #读取10字节，注意不是读取10行，若行字节小于10，读整行</span><br><span class="line"></span><br><span class="line">##4. 读取所有行并返回列表</span><br><span class="line">str5&#x3D;f.readlines()</span><br><span class="line">str6&#x3D;f.readlines(20)    #若一行不足20字节，读一行，若小于20，读取最多不超过20字节的行数</span><br><span class="line"></span><br><span class="line">##5. 修改描述符的位置</span><br><span class="line">f.seek(0)</span><br><span class="line"></span><br><span class="line">##########################################关闭文件</span><br><span class="line"></span><br><span class="line">#1. try···finally</span><br><span class="line">try:</span><br><span class="line">    f1&#x3D;open(path,&#39;r&#39;)</span><br><span class="line">    print(f1.read())</span><br><span class="line">finally:</span><br><span class="line">    if f1:</span><br><span class="line">        f1.close()</span><br><span class="line"></span><br><span class="line">#2. with···as··: 自动关闭</span><br><span class="line"></span><br><span class="line">with open(path,&#39;r&#39;) as f2:</span><br><span class="line">    print(f2.read())</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-写文件"><a href="#2-写文件" class="headerlink" title="2. 写文件"></a>2. 写文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">path&#x3D;r&quot;C:\users\test.txt&quot;</span><br><span class="line"></span><br><span class="line">f&#x3D;open(path,&quot;w&quot;)</span><br><span class="line"></span><br><span class="line">#1. 将信息写入缓冲区</span><br><span class="line">f.write(&quot;Gao Lingyu&quot;)   #此时还没写入文件</span><br><span class="line"></span><br><span class="line">#2. 刷新缓冲区</span><br><span class="line">f.flush()   #直接把内部缓冲区的数据立刻写入文件</span><br><span class="line">            #或者等缓冲区满自动刷新</span><br><span class="line">            #关闭文件自动刷新</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">time.sleep(0.01)</span><br><span class="line"></span><br><span class="line">#3. 自动关闭</span><br><span class="line"></span><br><span class="line">with open(path,&quot;a&quot;) as f1:</span><br><span class="line">    f1.write(&quot;Gao Lingyu&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="3-编码与解码"><a href="#3-编码与解码" class="headerlink" title="3. 编码与解码"></a>3. 编码与解码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">写爬虫时常用编解码：</span><br><span class="line">    gzip 表示打包格式，要想用uft-8，就不能打包</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#如果wb,rb二进制读写，要进行编解码</span><br><span class="line"></span><br><span class="line">#编码</span><br><span class="line">path&#x3D;r&quot;C:\test.txt&quot;</span><br><span class="line">with open(path,&quot;wb&quot;,encoding&#x3D;&quot;utf-8&quot;) as f1:</span><br><span class="line">    str&#x3D;&quot;gaolingyu&quot;</span><br><span class="line">    f1.write(str.encode(&quot;utf-8&quot;))</span><br><span class="line"></span><br><span class="line">#解码</span><br><span class="line">with open(path,&quot;rb&quot;) as fr:</span><br><span class="line">    data&#x3D;fr.read()</span><br><span class="line">    print(type(data))</span><br><span class="line">    newData&#x3D;data.decode(&quot;utf-8&quot;)</span><br><span class="line">    print(newData)</span><br><span class="line"></span><br><span class="line">#编码和解码要一致才行，要想强行读，可以设置errors&#x3D;&quot;ignore&quot;</span><br></pre></td></tr></table></figure>

<h3 id="4-对特殊数据结构的存储，pickle模块"><a href="#4-对特殊数据结构的存储，pickle模块" class="headerlink" title="4. 对特殊数据结构的存储，pickle模块"></a>4. 对特殊数据结构的存储，pickle模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">就是对特殊数据结构的存储</span><br><span class="line">可以直接在文件中存储这四种结构</span><br><span class="line">存储完后直接查看文件会出现乱码</span><br><span class="line">要用代码读</span><br><span class="line"></span><br><span class="line">数据持久性就是指把数据长期存储，比如存到本地文件</span><br><span class="line"></span><br><span class="line">写：dump</span><br><span class="line">读：load</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import pickle   #数据持久性模块</span><br><span class="line"></span><br><span class="line">#list存储</span><br><span class="line">myList&#x3D;[1,2,3,&quot;gaolingyu&quot;]</span><br><span class="line">path&#x3D;r&quot;C:\text.txt&quot;</span><br><span class="line">f&#x3D;open(path,&quot;wb&quot;)</span><br><span class="line">pickle.dump(myList,f)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">#读取</span><br><span class="line">f&#x3D;open(path,&quot;rb&quot;)</span><br><span class="line">tempList&#x3D;pickle.load(f)</span><br><span class="line">print(tempList)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">#其他结构类似，主要是dump,load</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="三、时间系统模块"><a href="#三、时间系统模块" class="headerlink" title="三、时间系统模块"></a>三、时间系统模块</h1><h3 id="1-calendar模块"><a href="#1-calendar模块" class="headerlink" title="1. calendar模块"></a>1. calendar模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#日历模块</span><br><span class="line"></span><br><span class="line">import calendar</span><br><span class="line"></span><br><span class="line">#返回指定月份的日历</span><br><span class="line">print(calendar.month(2018,12))</span><br><span class="line"></span><br><span class="line">#返回指定年份的日历</span><br><span class="line">print(calendar.calendar(2018))</span><br></pre></td></tr></table></figure>

<h3 id="2-datetime模块"><a href="#2-datetime模块" class="headerlink" title="2. datetime模块"></a>2. datetime模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># datetime可以理解为对time的封装，接口更易用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">d1&#x3D;datetime.datetime.now()</span><br><span class="line">print(d1)</span><br><span class="line"></span><br><span class="line">d2&#x3D;datetime.datetime(2000,12,2)</span><br><span class="line">print(d2,type(d2))</span><br><span class="line"></span><br><span class="line">#将时间转为字符串</span><br><span class="line">d3&#x3D;d1.strftime(&quot;%y-%m-%d %X&quot;)</span><br><span class="line">print(d3)</span><br><span class="line"></span><br><span class="line">#算时间差距</span><br><span class="line">d4&#x3D;d1-d2</span><br><span class="line">print(d4,type(d4))</span><br><span class="line">print(d4.days)  #只有这个类才有days属性</span><br></pre></td></tr></table></figure>

<h3 id="3-time模块"><a href="#3-time模块" class="headerlink" title="3. time模块"></a>3. time模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UTC(世界协调时间)</span><br><span class="line">DST(夏令时)</span><br><span class="line"></span><br><span class="line">时间的表示形式：</span><br><span class="line">1. 时间戳：以整形或浮点型表示，以秒为单位，从1970.1.1号开始的计数值</span><br><span class="line">2. 元组：一种Python的数据结构，这个元组有9个整型内容</span><br><span class="line">        year,month,day</span><br><span class="line">        hours,minute,second</span><br><span class="line">        weekday,yearday,flag(0,1,-1)</span><br><span class="line">3. 格式化字符串</span><br><span class="line">    %Y 年份 %m 月份 %d天数 %H 小时</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line"></span><br><span class="line">#时间戳</span><br><span class="line">t&#x3D;time.time()</span><br><span class="line">print(t)</span><br><span class="line"></span><br><span class="line">#UTC时间元组</span><br><span class="line">t&#x3D;time.gmtime()</span><br><span class="line">print(t)</span><br><span class="line"></span><br><span class="line">#本地时间元组</span><br><span class="line">t&#x3D;time.localtime()</span><br><span class="line">print(t)</span><br><span class="line">print(type(t))</span><br><span class="line">#将本地时间转换成时间戳</span><br><span class="line">m&#x3D;time.mktime(t)</span><br><span class="line">print(m)</span><br><span class="line"></span><br><span class="line">q&#x3D;time.strftime(&quot;%Y.%m.%d %H:%M:%S&quot;)</span><br><span class="line">print(q)</span><br><span class="line"></span><br><span class="line">q&#x3D;time.strftime(&quot;%Y.%m.%d %H:%M:%S&quot;,t)</span><br><span class="line">print(q)</span><br><span class="line"></span><br><span class="line">#time.clock() can be used to count time</span><br><span class="line">y1&#x3D;time.clock()</span><br><span class="line">print(y1)</span><br><span class="line">time.sleep(1)</span><br><span class="line">y2&#x3D;time.clock()</span><br><span class="line">print(y2)</span><br><span class="line">print(int(y2-y1))</span><br></pre></td></tr></table></figure>

<h3 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h3><h1 id="四、OS模块"><a href="#四、OS模块" class="headerlink" title="四、OS模块"></a>四、OS模块</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#OS:包含了普遍的操作系统的功能</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">#获得系统名字</span><br><span class="line">#nt windows</span><br><span class="line">#posix  Linux&#x2F;Unix&#x2F;Mac OS X</span><br><span class="line">print(os.name)</span><br><span class="line"></span><br><span class="line">#获得操作系统详细信息，仅linux下可用</span><br><span class="line">try:</span><br><span class="line">    os.uname()</span><br><span class="line">except:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">#获取系统环境变量</span><br><span class="line">#print(os.environ)</span><br><span class="line">print(os.environ.get(&quot;APPDATA&quot;))</span><br><span class="line"></span><br><span class="line">print(os.curdir)    #当前目录</span><br><span class="line"></span><br><span class="line">print(os.getcwd())  #当前工作目录，即Python脚本所在目录</span><br><span class="line"></span><br><span class="line">print(os.listdir(r&quot;E:\code20G&quot;))    #获得该目录下所有文件，返回一个列表</span><br><span class="line"></span><br><span class="line">os.mkdir(&quot;Python创建的目录&quot;)    #在当前目录下创建文件夹，也可以用绝对路径</span><br><span class="line">os.rmdir(&quot;Python创建的目录&quot;)</span><br><span class="line"></span><br><span class="line">print(os.stat(&quot;filename&quot;))  #获得文件属性</span><br><span class="line"></span><br><span class="line">os.rename(&quot;srcfile&quot;,&quot;newName&quot;)  #改名</span><br><span class="line"></span><br><span class="line">os.remove(&quot;filename&quot;)   #删除文件</span><br><span class="line"></span><br><span class="line">os.system(&quot;notepad&quot;)  #直接执行命令</span><br><span class="line">os.system(&quot;mspaint&quot;)    #画板</span><br><span class="line"></span><br><span class="line">#shutdown -s -t 500 500秒后关机</span><br><span class="line">#shutdown -a    取消关机</span><br><span class="line">os.system(&quot;taskkill &#x2F;f &#x2F;im notepad.exe&quot;)    #关闭指定程序</span><br><span class="line"></span><br><span class="line">os.path.abspath(&quot;.&#x2F;&quot;)   #查看当前路径的绝对路径</span><br><span class="line"></span><br><span class="line">p1&#x3D;&quot;&#x2F;root&quot;</span><br><span class="line">p2&#x3D;&quot;mydir&quot;</span><br><span class="line">os.path.join(p1,p2) #拼接路径，得到 &#x2F;root&#x2F;mydir</span><br><span class="line"></span><br><span class="line">p1&#x3D;&quot;&#x2F;root&#x2F;mydir&#x2F;aaa.txt&quot;</span><br><span class="line">os.path.split(p1)   #得到一个列表，两个元素，[&#39;&#x2F;root&#x2F;mydir&#39;,&#39;aaa.txt&#39;]</span><br><span class="line">os.path.splitext(p1)   #得到一个列表，两个元素，[&#39;&#x2F;root&#x2F;mydir&#x2F;aaa&#39;,&#39;.txt&#39;]</span><br><span class="line">                        #只获取扩展名，没有扩展名的话为空</span><br><span class="line"></span><br><span class="line">os.path.isdir(p1)</span><br><span class="line">os.path.isfile(p1)  #判断文件是否存在</span><br><span class="line">os.path.exists(p1)  #目录是否存在</span><br><span class="line">os.path.getsize(p1) #获得文件大小</span><br></pre></td></tr></table></figure>

<h1 id="五、类"><a href="#五、类" class="headerlink" title="五、类"></a>五、类</h1><h3 id="0-类的定义"><a href="#0-类的定义" class="headerlink" title="0. 类的定义"></a>0. 类的定义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class 类名(父类列表):</span><br><span class="line">    属性    属性也可以定义在__init__(self)中</span><br><span class="line">    私有属性 在名字前加两个下划线__</span><br><span class="line">    行为</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Person(object):</span><br><span class="line">    __name&#x3D;&quot;&quot;   #私有属性</span><br><span class="line">    age&#x3D;0       #公有属性</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def setName(self,name):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line"></span><br><span class="line">    def getName(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">p&#x3D;Person()</span><br><span class="line">p.setName(&quot;lingyu&quot;)</span><br><span class="line">name&#x3D;p.getName()</span><br><span class="line">print(name)</span><br></pre></td></tr></table></figure>

<h3 id="1-单继承"><a href="#1-单继承" class="headerlink" title="1. 单继承"></a>1. 单继承</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">class Person(object):</span><br><span class="line">    name&#x3D;&quot;lingyu&quot;</span><br><span class="line">    age&#x3D;0</span><br><span class="line"></span><br><span class="line">    # def __init__(self):</span><br><span class="line">    #     print(&quot;构造函数&quot;)</span><br><span class="line"></span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        print(&quot;带参数的构造函数&quot;,self.name,self.age)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def setName(self,name):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line"></span><br><span class="line">    def getName(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">class Student(Person):</span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        super(Student,self).__init__(name,age)</span><br><span class="line">        self.id&#x3D;1000</span><br><span class="line"></span><br><span class="line"># s&#x3D;Student()</span><br><span class="line"></span><br><span class="line">s2&#x3D;Student(&quot;hhh&quot;,10)</span><br><span class="line">print(s2.getName())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-多继承"><a href="#2-多继承" class="headerlink" title="2. 多继承"></a>2. 多继承</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#39;&#39;&#39;</span><br><span class="line">    若父类中有方法名相同，默认调用继承时排前面的父类的方法名</span><br><span class="line"></span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line"></span><br><span class="line">class Father(object):</span><br><span class="line">    </span><br><span class="line">    def __init__(self,money):</span><br><span class="line">        self.money&#x3D;money</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Mather(object):</span><br><span class="line">    def __init__(self,butiful):</span><br><span class="line">        self.butiful&#x3D;butiful</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Child(Father,Mather):</span><br><span class="line">    </span><br><span class="line">    def __init__(self,my_name,money,butiful):</span><br><span class="line">        Father.__init__(self,money)</span><br><span class="line">        Mather.__init__(self,butiful)</span><br><span class="line">        self.name&#x3D;my_name</span><br><span class="line"></span><br><span class="line">c&#x3D;Child(&quot;吕口&quot;,1000,100)</span><br><span class="line">print(c.money)</span><br><span class="line">print(c.name)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-对象属性与类属性"><a href="#3-对象属性与类属性" class="headerlink" title="3. 对象属性与类属性"></a>3. 对象属性与类属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">对象属性：</span><br><span class="line">    通过对象名调用</span><br><span class="line"></span><br><span class="line">    对象可在实例后，自己临时添加属性</span><br><span class="line"></span><br><span class="line">    临时添加方法：from type import MethodType</span><br><span class="line">                MethodType(要添加的函数名，实例对象名)</span><br><span class="line"></span><br><span class="line">类属性：</span><br><span class="line">    通过类名调用，和C++类中的static类似，但有区别</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Person(object):</span><br><span class="line">    str&#x3D;&quot;这是一个人&quot;    #可通过Person.str访问</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.name&#x3D;&quot;这是对象属性&quot;    #不能通过Person.str访问</span><br><span class="line">        </span><br><span class="line">#对象属性的优先级大于类属性</span><br><span class="line">p&#x3D;Person()</span><br><span class="line">print(p.str)</span><br><span class="line">print(Person.str)</span><br><span class="line">p.str&#x3D;&quot;改变了类属性&quot;</span><br><span class="line">p.age&#x3D;18</span><br><span class="line">print(p.age)    #可临时给对象添加属性，类中没添加</span><br><span class="line"></span><br><span class="line">print(Person.str)</span><br><span class="line">print(p.str)</span><br></pre></td></tr></table></figure>

<h3 id="4-构造函数"><a href="#4-构造函数" class="headerlink" title="4. 构造函数"></a>4. 构造函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__init__(self)  </span><br><span class="line">在类的对象创建时自动调用</span><br><span class="line">可以不写，但会自动生成一个</span><br><span class="line">构造函数不能有多个，要实现多态可以传多个参数</span><br><span class="line">属性也可以定义在__init__(self)中</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class Person(object):</span><br><span class="line">    name&#x3D;&quot;&quot;</span><br><span class="line">    age&#x3D;0</span><br><span class="line"></span><br><span class="line">    # def __init__(self):</span><br><span class="line">    #     print(&quot;构造函数&quot;)</span><br><span class="line"></span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        print(&quot;带参数的构造函数&quot;,self.name,self.age)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def setName(self,name):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line"></span><br><span class="line">    def getName(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">p&#x3D;Person(&quot;lingyu&quot;,18)</span><br></pre></td></tr></table></figure>

<h3 id="5-析构函数"><a href="#5-析构函数" class="headerlink" title="5. 析构函数"></a>5. 析构函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__del__(self)   释放对象时调用 </span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">class Person(object):</span><br><span class="line">    name&#x3D;&quot;&quot;</span><br><span class="line">    age&#x3D;0</span><br><span class="line"></span><br><span class="line">    # def __init__(self):</span><br><span class="line">    #     print(&quot;构造函数&quot;)</span><br><span class="line"></span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        print(&quot;带参数的构造函数&quot;,self.name,self.age)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def setName(self,name):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line"></span><br><span class="line">    def getName(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">    def __del__(self):</span><br><span class="line">        print(&quot;析构函数执行了&quot;)</span><br><span class="line"></span><br><span class="line">p&#x3D;Person(&quot;lingyu&quot;,18)</span><br><span class="line"></span><br><span class="line">del p</span><br><span class="line">while 1:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>

<h3 id="6-重写str"><a href="#6-重写str" class="headerlink" title="6. 重写str()"></a>6. 重写<strong>str</strong>()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class Person(object):</span><br><span class="line">    name&#x3D;&quot;&quot;</span><br><span class="line">    age&#x3D;0</span><br><span class="line"></span><br><span class="line">    # def __init__(self):</span><br><span class="line">    #     print(&quot;构造函数&quot;)</span><br><span class="line"></span><br><span class="line">    def __init__(self,name,age):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        print(&quot;带参数的构造函数&quot;,self.name,self.age)</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def setName(self,name):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line"></span><br><span class="line">    def getName(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &quot;这是一个人的类&quot;</span><br><span class="line"></span><br><span class="line">p&#x3D;Person(&quot;lingyu&quot;,18)</span><br><span class="line"></span><br><span class="line">print(p)</span><br></pre></td></tr></table></figure>

<h3 id="7-运算符重载"><a href="#7-运算符重载" class="headerlink" title="7. 运算符重载"></a>7. 运算符重载</h3><ul>
<li>就是重写特殊函数<ul>
<li>例如：__str__(self)等</li>
</ul>
</li>
</ul>
<h1 id="六、模块"><a href="#六、模块" class="headerlink" title="六、模块"></a>六、模块</h1><h3 id="1-包"><a href="#1-包" class="headerlink" title="1.包"></a>1.包</h3><ul>
<li><p>为什么用包：</p>
<ul>
<li>若不同的人写的模块名字相同，引用会发生冲突</li>
</ul>
</li>
<li><p>怎么用：</p>
<ul>
<li>相当于建立一个文件夹，该文件夹下必须有<strong>init</strong>.py文件，有这个文件才能被认为是一个包</li>
</ul>
</li>
</ul>
<h3 id="2-系统模块"><a href="#2-系统模块" class="headerlink" title="2. 系统模块"></a>2. 系统模块</h3><ul>
<li>sys主要用argv属性，获得命令行参数</li>
<li>相当于main(argv,args[])中的args<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line"></span><br><span class="line">for i in sys.argv:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-自定义模块"><a href="#3-自定义模块" class="headerlink" title="3. 自定义模块"></a>3. 自定义模块</h3><ul>
<li>一个.py文件就是一个模块</li>
<li>__name__==”__main__”的作用  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def hello():</span><br><span class="line">    pass</span><br><span class="line">if __name__&#x3D;&#x3D;&quot;__main__&quot;:</span><br><span class="line">    print(&quot;只有当这个py文件直接运行时这一段代码\</span><br><span class="line">    才会运行，否则不运行&quot;)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;这个py文件被引入其他文件时会执行这句&quot;)</span><br></pre></td></tr></table></figure>


</li>
</ul>
<pre><code>#常用格式：


def main():
    pass


if __name__==&quot;__main__&quot;:
    main()
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 七、高级函数</span><br><span class="line"></span><br><span class="line">### 1. 过滤器</span><br></pre></td></tr></table></figure></code></pre>
<p>filter(fn,lsd)<br>fn: func name<br>lsd: 序列<br>function: 过滤序列<br>        把传入的函数依次作用于序列中的每一个元素，<br>        返回True就保留，False不保留</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#96;&#96;&#96;</span><br><span class="line"></span><br><span class="line">def is_oushu(num):</span><br><span class="line">    if num%2&#x3D;&#x3D;0:</span><br><span class="line">        return True</span><br><span class="line">    return False</span><br><span class="line">list1&#x3D;[1,2,3,4,5,6,7,8,9]</span><br><span class="line">print(list1)</span><br><span class="line"></span><br><span class="line">res&#x3D;filter(is_oushu,list1)</span><br><span class="line">print(list(res))</span><br></pre></td></tr></table></figure>

<h3 id="2-队列"><a href="#2-队列" class="headerlink" title="2. 队列"></a>2. 队列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">先进先出</span><br><span class="line">使用collections模块</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import collections</span><br><span class="line"></span><br><span class="line">#创建一个空队列</span><br><span class="line">queue &#x3D; collections.deque()</span><br><span class="line">print(queue)</span><br><span class="line"></span><br><span class="line">#进队</span><br><span class="line">queue.append(&quot;a&quot;)</span><br><span class="line">queue.append(&quot;b&quot;)</span><br><span class="line">queue.append(&quot;c&quot;)</span><br><span class="line">print(queue)</span><br><span class="line">res1&#x3D;queue.pop()</span><br><span class="line">res2&#x3D;queue.popleft()    #这个才是先进先出</span><br><span class="line">print(res1)</span><br><span class="line">print(res2)</span><br><span class="line">print(queue)</span><br></pre></td></tr></table></figure>

<h3 id="3-栈"><a href="#3-栈" class="headerlink" title="3. 栈"></a>3. 栈</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">后进先出</span><br><span class="line">用列表来模拟找</span><br><span class="line">append()入栈</span><br><span class="line">pop()出栈</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">stack&#x3D;[]</span><br><span class="line"></span><br><span class="line">stack.append(&quot;a&quot;)</span><br><span class="line">stack.append(&quot;b&quot;)</span><br><span class="line">stack.append(&quot;c&quot;)</span><br><span class="line">print(stack)</span><br><span class="line"></span><br><span class="line">res&#x3D;stack.pop()</span><br><span class="line">print(res)</span><br><span class="line">print(stack)</span><br></pre></td></tr></table></figure>

<h3 id="4-排序"><a href="#4-排序" class="headerlink" title="4. 排序"></a>4. 排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ll&#x3D;[4,2,-7,1,5]</span><br><span class="line">ll2&#x3D;sorted(ll)  #默认升序排序</span><br><span class="line"></span><br><span class="line">ll3&#x3D;sorted(ll,key&#x3D;abs)  #按绝对值大小排序</span><br><span class="line">                        #还可以根据key实现自定义排序规则</span><br><span class="line">print(ll)</span><br><span class="line">print(ll2)</span><br><span class="line">print(ll3)</span><br><span class="line"></span><br><span class="line">自己写排序函数</span><br><span class="line">def up_to_len(str):</span><br><span class="line">    return len(str)</span><br><span class="line">ll&#x3D;[&quot;asd&quot;,&quot;as&quot;,&quot;qwded&quot;,&quot;adwwe&quot;]</span><br><span class="line">ll4&#x3D;sorted(ll,key&#x3D;up_to_len)</span><br><span class="line">print(ll4)</span><br></pre></td></tr></table></figure>

<h3 id="5-map-reduce"><a href="#5-map-reduce" class="headerlink" title="5. map,reduce"></a>5. map,reduce</h3><ul>
<li>map就是对列表的每一个元素应用某个函数</li>
<li>reduce是计算<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">分布式计算</span><br><span class="line">    map把数据分给不同的主机</span><br><span class="line">    reduce把各主机的结果整合起来</span><br><span class="line"></span><br><span class="line">map(fn,lsd)</span><br><span class="line">fn: 函数</span><br><span class="line">lsd: 序列</span><br><span class="line">功能：将传入的函数依次作用于序列中的每一个元素，</span><br><span class="line">    并把结果作为新的Iterator返回</span><br><span class="line"></span><br><span class="line">reduce(fn,lsd)</span><br><span class="line">fn: 函数</span><br><span class="line">lsd: 列表</span><br><span class="line">功能：一个函数作用在序列上，这个函数必须接受两个参数，</span><br><span class="line">    reduce把结果继续和序列的下一个元素累计运算</span><br><span class="line">例子：reduce(f,[a,b,c])</span><br><span class="line">    等价于：f(f(f(a),b),c)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">    map例子</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">def char2int(ch):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">        将character装换成int</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    chs&#x3D;&#123;&quot;0&quot;:0,&quot;1&quot;:1,&quot;2&quot;:2&#125;</span><br><span class="line">    return chs[ch]</span><br><span class="line"></span><br><span class="line">list1&#x3D;[&quot;1&quot;,&quot;2&quot;,&quot;0&quot;]</span><br><span class="line"></span><br><span class="line">result&#x3D;map(char2int,list1)</span><br><span class="line">print(result)</span><br><span class="line">print(list(result))</span><br><span class="line"></span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">    将other换成string</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">list2&#x3D;[0,1,2,True,4,5,6,7.5,8,9999]</span><br><span class="line">res2&#x3D;map(str,list2)</span><br><span class="line">print(list(res2))</span><br><span class="line"></span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">    reduce例子</span><br><span class="line">    map不用额外库，reduce需要</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">from functools import reduce</span><br><span class="line"></span><br><span class="line">def count_sum(a,b):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">        计算a+b</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    return a+b</span><br><span class="line"></span><br><span class="line">list3&#x3D;[1,2,3,4]</span><br><span class="line">res&#x3D;reduce(count_sum,list3)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>

<h3 id="6-偏函数"><a href="#6-偏函数" class="headerlink" title="6. 偏函数"></a>6. 偏函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;----------------自己定义的偏函数---------------&quot;)</span><br><span class="line">#自己定义偏函数</span><br><span class="line"></span><br><span class="line">print(int(&quot;1000&quot;))  #默认基数为10</span><br><span class="line"></span><br><span class="line">print(int(&quot;1000&quot;,base&#x3D;2))   #设置基数为2</span><br><span class="line"></span><br><span class="line">#自己定义的偏函数</span><br><span class="line">def int2(str,base&#x3D;2):</span><br><span class="line">    return int(str,base)</span><br><span class="line">print(int2(&quot;1000&quot;))</span><br><span class="line"></span><br><span class="line">print(&quot;----------------调用模块---------------&quot;)</span><br><span class="line"></span><br><span class="line">import functools</span><br><span class="line"></span><br><span class="line">#作用：把一个参数固定住，形成一个新的函数</span><br><span class="line">#把int函数的base参数固定为2</span><br><span class="line">int3&#x3D;functools.partial(int,base&#x3D;2)</span><br><span class="line"></span><br><span class="line">print(int3(&quot;1000&quot;))</span><br></pre></td></tr></table></figure>

<h3 id="7-装饰器"><a href="#7-装饰器" class="headerlink" title="7. 装饰器"></a>7. 装饰器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">概念：是一个闭包，把一个函数当做参数，返回一个替代版的函数</span><br><span class="line">        就是一个返回函数的函数</span><br><span class="line">用途：不能更改原来的函数，又想增加一些功能</span><br></pre></td></tr></table></figure>


<ul>
<li><p>最简单的装饰器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;-------------最简单装饰器----------&quot;)</span><br><span class="line"></span><br><span class="line">def ppp():</span><br><span class="line">    print(&quot;Hello&quot;)</span><br><span class="line"></span><br><span class="line">def outer1(func):</span><br><span class="line">    def inner():</span><br><span class="line">        print(&quot;***&quot;)</span><br><span class="line">        func()</span><br><span class="line">    return inner</span><br><span class="line"></span><br><span class="line">f &#x3D; outer1(ppp)</span><br><span class="line">f()</span><br></pre></td></tr></table></figure>
</li>
<li><p>改进的装饰器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;-------------改进装饰器----------&quot;)</span><br><span class="line"></span><br><span class="line">def outer(func):</span><br><span class="line">    def inner(age):</span><br><span class="line">        if(age&lt;0):</span><br><span class="line">            print(&quot;年龄有误，更改为0&quot;)</span><br><span class="line">            age&#x3D;0</span><br><span class="line">        func(age)</span><br><span class="line">    return inner</span><br><span class="line"></span><br><span class="line">@outer</span><br><span class="line">def say(age):</span><br><span class="line">    print(&quot;I am %d years old&quot;%(age))</span><br><span class="line"></span><br><span class="line">#上面加 @outer 代替了下面这句</span><br><span class="line">#say&#x3D;outer(say)</span><br><span class="line"></span><br><span class="line">say(-1)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>通用的装饰器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;----------------通用装饰器---------------&quot;)</span><br><span class="line"></span><br><span class="line">def outer2(func):</span><br><span class="line">    def inner(*args,**kwargs):</span><br><span class="line">        #添加修改的功能</span><br><span class="line">        print(&quot;装饰器修饰了&quot;)</span><br><span class="line">        return func(*args,**kwargs)</span><br><span class="line">    return inner</span><br><span class="line"></span><br><span class="line">@outer2</span><br><span class="line">def say2(name,age):</span><br><span class="line">    print(&quot;I am %s, %d years old&quot;%(name,age))</span><br><span class="line"></span><br><span class="line">say2(&quot;吕口&quot;,18)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="8-广度遍历"><a href="#8-广度遍历" class="headerlink" title="8. 广度遍历"></a>8. 广度遍历</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">队列模拟广度优先遍历</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">import collections</span><br><span class="line">def getAllDirQueue(path):</span><br><span class="line">    queue&#x3D;collections.deque()</span><br><span class="line">    queue.append(path)</span><br><span class="line">    while len(queue)!&#x3D;0:</span><br><span class="line">        dirPath&#x3D;queue.popleft()</span><br><span class="line">        file_list&#x3D;os.listdir(dirPath)</span><br><span class="line">        for file_name in file_list:</span><br><span class="line">            absPath&#x3D;os.path.join(dirPath,file_name)</span><br><span class="line">            if os.path.isdir(absPath):</span><br><span class="line">                print(&quot;目录：&quot;,file_name)</span><br><span class="line">                queue.append(absPath)</span><br><span class="line">            else:</span><br><span class="line">                print(&quot;文件：&quot;,file_name)</span><br><span class="line"></span><br><span class="line">path  &#x3D;r&quot;E:\Task\3_上_专业英语&quot;</span><br><span class="line">getAllDirQueue(path)</span><br></pre></td></tr></table></figure>

<h3 id="9-深度遍历"><a href="#9-深度遍历" class="headerlink" title="9. 深度遍历"></a>9. 深度遍历</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">用栈遍历模拟递归遍历（深度遍历）</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">def getAllDirDeep(path,sp):</span><br><span class="line">    stack&#x3D;[]</span><br><span class="line">    stack.append(path)</span><br><span class="line">    sp +&#x3D;&quot;   &quot;</span><br><span class="line">    #当栈为空时结束循环</span><br><span class="line">    while len(stack)!&#x3D;0:</span><br><span class="line">        dirPath&#x3D;stack.pop()</span><br><span class="line">        file_list&#x3D;os.listdir(dirPath)</span><br><span class="line">        for file_name in file_list:</span><br><span class="line">            absPath&#x3D;os.path.join(dirPath,file_name)</span><br><span class="line">            if os.path.isdir(absPath):</span><br><span class="line">                print(sp,&quot;目录：&quot;,file_name)</span><br><span class="line">                stack.append(absPath)</span><br><span class="line">            else:</span><br><span class="line">                print(sp,&quot;文件：&quot;,file_name)</span><br><span class="line"></span><br><span class="line">path&#x3D;r&quot;E:\Task\3_上_专业英语&quot;</span><br><span class="line">sp&#x3D;&quot;&quot;</span><br><span class="line">getAllDirDeep(path,sp)</span><br></pre></td></tr></table></figure>

<h3 id="10-递归遍历目录"><a href="#10-递归遍历目录" class="headerlink" title="10. 递归遍历目录"></a>10. 递归遍历目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line">def getAllDir(path,sp):</span><br><span class="line">    #获得当前目录下所有文件</span><br><span class="line">    file_list&#x3D;os.listdir(path)</span><br><span class="line">    sp +&#x3D;&quot;   &quot;</span><br><span class="line">    #判断每一个文件是否是目录，是的话递归遍历，不是的话</span><br><span class="line">    for file_name in file_list:</span><br><span class="line">        abs_path&#x3D;os.path.join(path,file_name)</span><br><span class="line">        if os.path.isdir(abs_path):</span><br><span class="line">            print(sp,&quot;目录：&quot;,file_name)</span><br><span class="line">        #递归</span><br><span class="line">            getAllDir(abs_path,sp)</span><br><span class="line">        else:</span><br><span class="line">            print(sp,&quot;文件：&quot;,file_name)</span><br><span class="line"></span><br><span class="line">sp&#x3D;&quot;&quot;</span><br><span class="line">getAllDir(r&quot;E:\Task\3_上_专业英语&quot;,sp)</span><br></pre></td></tr></table></figure>

<h1 id="八、多任务"><a href="#八、多任务" class="headerlink" title="八、多任务"></a>八、多任务</h1><h3 id="1-用途"><a href="#1-用途" class="headerlink" title="1. 用途"></a>1. 用途</h3><ul>
<li>计算密集型 or IO密集型<ul>
<li>计算密集型就是用CPU比较多，此时进程数等于CPU核数效率最高，例如对视频高清解码</li>
<li>IO密集型就是多IO，此时进程越多越好，但也不能无限多，例如Web应用</li>
</ul>
</li>
</ul>
<h5 id="多任务实现原理"><a href="#多任务实现原理" class="headerlink" title="多任务实现原理"></a>多任务实现原理</h5><pre><code>设计Master-Worker模式，Master负责分配任务，Worker负责执行任务，
通常是一个Master，多个Worker</code></pre>
<h5 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h5><pre><code>主进程是Master，其他进程是Worker
1. 优点
    稳定性高，一个进程崩溃了，不会影响主进程和其他进程
2. 缺点
    创建进程的开销大，Linux下的fork还好，Windows下开销巨大
    操作系统能同时运行的进程数也是有限的</code></pre>
<h5 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h5><pre><code>主线程是Master，others is Worker
1. 优点
    在windows下，多线程效率比多进程高
2. 缺点
    任何一个线程挂掉都可能造成整个进程崩溃</code></pre>
<h3 id="2-进程"><a href="#2-进程" class="headerlink" title="2. 进程"></a>2. 进程</h3><h5 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h5><ul>
<li>multiprocessing是一个跨平台的多进程库<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from multiprocessing import Process</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def process2():</span><br><span class="line">    while True:</span><br><span class="line">        print(&quot;进程2-------&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    print(&quot;主进程启动&quot;)</span><br><span class="line"></span><br><span class="line">    p&#x3D;Process(target&#x3D;process2)</span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        print(&quot;主进程------&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">if __name__&#x3D;&#x3D;&quot;__main__&quot;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="父子进程的先后顺序"><a href="#父子进程的先后顺序" class="headerlink" title="父子进程的先后顺序"></a>父子进程的先后顺序</h5><ul>
<li>一般子进程启动后，不受父进程的结束影响,可用.join()，让父进程等子进程运行完后再运行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from multiprocessing import Process</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def process2():</span><br><span class="line">    while True:</span><br><span class="line">        print(&quot;进程2----开始---&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        print(&quot;进程2----结束---&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    print(&quot;主进程启动&quot;)</span><br><span class="line"></span><br><span class="line">    p&#x3D;Process(target&#x3D;process2)</span><br><span class="line">    p.start()</span><br><span class="line">    #父进程等子进程结束后再继续向下运行</span><br><span class="line">    p.join()    #此时代码不往下执行</span><br><span class="line">    while True:</span><br><span class="line">        print(&quot;主进程------&quot;)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">if __name__&#x3D;&#x3D;&quot;__main__&quot;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="进程间通信：通过队列实现"><a href="#进程间通信：通过队列实现" class="headerlink" title="进程间通信：通过队列实现"></a>进程间通信：通过队列实现</h5><ul>
<li>有点类似管道<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">from multiprocessing import Process,Queue</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">def write(q):</span><br><span class="line">    print(&quot;启动了进程%s&quot; % (os.getpid()))</span><br><span class="line">    for chr in [&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;]:</span><br><span class="line">        q.put(chr)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">    print(&quot;子进程%s结束&quot;%(os.getpid()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def read(q):</span><br><span class="line">    print(&quot;启动了读进程%s&quot; % (os.getpid()))</span><br><span class="line">    while True:</span><br><span class="line">        value&#x3D;q.get(True)</span><br><span class="line">        print(&quot;value&#x3D;&quot;,value)</span><br><span class="line">    print(&quot;结束了读进程%s&quot; % (os.getpid()))</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    q&#x3D;Queue()</span><br><span class="line">    pw&#x3D;Process(target&#x3D;write,args&#x3D;(q,))</span><br><span class="line">    pr&#x3D;Process(target&#x3D;read,args&#x3D;(q,))</span><br><span class="line"></span><br><span class="line">    pw.start()</span><br><span class="line">    pr.start()</span><br><span class="line"></span><br><span class="line">    pw.join()</span><br><span class="line">    #pr is a infinite loop and can only be forced to end </span><br><span class="line">    pr.terminate()</span><br><span class="line"></span><br><span class="line">    print(&quot;The parent process ends&quot;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="进程池"><a href="#进程池" class="headerlink" title="进程池"></a>进程池</h5><ul>
<li>用于处理大量子进程<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">from multiprocessing import Process</span><br><span class="line">from multiprocessing import Pool</span><br><span class="line">import os</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def run(name):</span><br><span class="line">    print(&quot;子进程%d启动---%s&quot; % (name,os.getpid()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    print(&quot;父进程启动&quot;)    </span><br><span class="line">    #create multiple process</span><br><span class="line">    #use process pool</span><br><span class="line">    #the pool&#39;s default size is the number of core</span><br><span class="line">    pool&#x3D;Pool()</span><br><span class="line">    for i in range(10):</span><br><span class="line">        #create process and manage by pool</span><br><span class="line">        pool.apply_async(run,args&#x3D;(i,))</span><br><span class="line"></span><br><span class="line">    #call close() before call join(), after close(),can&#39;t create new process</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br><span class="line">    print(&quot;父进程结束&quot;)   </span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="全局变量在多个进程中互不影响"><a href="#全局变量在多个进程中互不影响" class="headerlink" title="全局变量在多个进程中互不影响"></a>全局变量在多个进程中互不影响</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from multiprocessing import Process</span><br><span class="line">import time</span><br><span class="line">num&#x3D;100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def run():</span><br><span class="line">    global num</span><br><span class="line">    num +&#x3D; 1</span><br><span class="line">    print(&quot;子进程&quot;,num)</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    p&#x3D;Process(target&#x3D;run)</span><br><span class="line">    p2&#x3D;Process(target&#x3D;run)</span><br><span class="line"></span><br><span class="line">    p.start()</span><br><span class="line">    p2.start()</span><br><span class="line">    p.join()</span><br><span class="line">    p2.join()</span><br><span class="line">    print(&quot;父进程&quot;,num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h5 id="自己封装进程"><a href="#自己封装进程" class="headerlink" title="自己封装进程"></a>自己封装进程</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">from multiprocessing import Process</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">class lvkouProcess(Process):</span><br><span class="line"></span><br><span class="line">    def __init__(self,name):</span><br><span class="line">        Process.__init__(self)</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line"></span><br><span class="line">    def run(self):</span><br><span class="line">        print(&quot;子进程%s启动&quot; % (self.name))</span><br><span class="line">        print(&quot;子进程%s结束&quot; % (self.name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    print(&quot;主进程启动&quot;)</span><br><span class="line">    p&#x3D;lvkouProcess(&quot;LingYu&quot;)</span><br><span class="line">    p.start()   #Automatically call run()</span><br><span class="line">    p.join()</span><br><span class="line">    print(&quot;主进程结束&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="3-线程"><a href="#3-线程" class="headerlink" title="3. 线程"></a>3. 线程</h3><h5 id="入门-1"><a href="#入门-1" class="headerlink" title="入门"></a>入门</h5><ul>
<li>线程用的是进程的空间<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">a&#x3D;10</span><br><span class="line"></span><br><span class="line">def run():</span><br><span class="line">    print(&quot;子线程%s启动&quot; % (threading.current_thread().name))</span><br><span class="line">    print(a)</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    print(&quot;子线程%s结束&quot; % (threading.current_thread().name))</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    print(&quot;主线程%s启动&quot; % (threading.current_thread().name))</span><br><span class="line">    t&#x3D;threading.Thread(target&#x3D;run,name&#x3D;&quot;son&quot;)</span><br><span class="line">    t.start()</span><br><span class="line">    print(&quot;主线程%s结束&quot; % (threading.current_thread().name))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="多线程共享变量"><a href="#多线程共享变量" class="headerlink" title="多线程共享变量"></a>多线程共享变量</h5><ul>
<li>多进程，会对使用内存进行拷贝，各进程互不影响</li>
<li>多线程，各线程共享相同变量，若多个线程同时改一个变量，容易把内存搞乱<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">num&#x3D;0</span><br><span class="line"></span><br><span class="line">def run(n):</span><br><span class="line">    global num</span><br><span class="line">    for i in range(10000000):</span><br><span class="line">        num  +&#x3D; n</span><br><span class="line">        num  -&#x3D; n</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    t&#x3D;threading.Thread(target&#x3D;run,args&#x3D;(9,))</span><br><span class="line">    t2&#x3D;threading.Thread(target&#x3D;run,args&#x3D;(6,))</span><br><span class="line"></span><br><span class="line">    print(num)</span><br><span class="line">    t.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(num)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="加锁"><a href="#加锁" class="headerlink" title="加锁"></a>加锁</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">num&#x3D;0</span><br><span class="line">#锁对象</span><br><span class="line">lock&#x3D;threading.Lock()</span><br><span class="line"></span><br><span class="line">def run(n):</span><br><span class="line">    global num</span><br><span class="line">    for i in range(10000000):</span><br><span class="line">        lock.acquire()</span><br><span class="line">        try:</span><br><span class="line">            num &#x3D;num + n</span><br><span class="line">            num &#x3D;num - n</span><br><span class="line">        finally:#一定要释放锁</span><br><span class="line">            lock.release()</span><br><span class="line">        #下三行与上面功能一样，with能自动释放</span><br><span class="line">        with lock:</span><br><span class="line">            num +&#x3D; n</span><br><span class="line">            num -&#x3D; n</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    t&#x3D;threading.Thread(target&#x3D;run,args&#x3D;(9,))</span><br><span class="line">    t2&#x3D;threading.Thread(target&#x3D;run,args&#x3D;(6,))</span><br><span class="line"></span><br><span class="line">    print(num)</span><br><span class="line">    t.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(num)</span><br></pre></td></tr></table></figure>

<h5 id="定时线程"><a href="#定时线程" class="headerlink" title="定时线程"></a>定时线程</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line"></span><br><span class="line">def run():</span><br><span class="line">    print(&quot;the child thread&quot;)</span><br><span class="line"></span><br><span class="line">#延时5s</span><br><span class="line">t&#x3D;threading.Timer(5,run)</span><br><span class="line"></span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line">t.join()</span><br><span class="line">print(&quot;The parent ends&quot;)</span><br></pre></td></tr></table></figure>

<h5 id="条件变量调度"><a href="#条件变量调度" class="headerlink" title="条件变量调度"></a>条件变量调度</h5><ul>
<li>若不加cond,线程执行是没有顺序的,加了后从0到9依次执行</li>
<li>这只是两个进程，多个进程用到再学吧<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import threading,time</span><br><span class="line"></span><br><span class="line">cond&#x3D;threading.Condition()</span><br><span class="line"></span><br><span class="line">def run1():</span><br><span class="line">    with cond:</span><br><span class="line">        for i in range(0,10,2):</span><br><span class="line">            print(threading.current_thread().name,i)</span><br><span class="line">            time.sleep(0.2)</span><br><span class="line">            cond.wait() #等待</span><br><span class="line">            cond.notify()   #通知不用等待了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def run2():</span><br><span class="line">    with cond:</span><br><span class="line">        for i in range(1,10,2):</span><br><span class="line">            print(threading.current_thread().name,i)</span><br><span class="line">            time.sleep(0.2)</span><br><span class="line">            cond.notify()</span><br><span class="line">            cond.wait()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    t1&#x3D;threading.Thread(target&#x3D;run1)</span><br><span class="line">    t2&#x3D;threading.Thread(target&#x3D;run2)</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    print(&quot;主线程结束&quot;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="生产者消费者"><a href="#生产者消费者" class="headerlink" title="生产者消费者"></a>生产者消费者</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import threading,queue,time,random</span><br><span class="line"></span><br><span class="line">#生产者</span><br><span class="line">def product(id,q):</span><br><span class="line">    while True:</span><br><span class="line">        num&#x3D;random.randint(0,10000)</span><br><span class="line">        q.put(num)</span><br><span class="line">        print(&quot;%d product a %d&quot; % (id,num))</span><br><span class="line">        time.sleep(3)</span><br><span class="line">    q.task_done()</span><br><span class="line"></span><br><span class="line">#消费者</span><br><span class="line">def customer(id,q):</span><br><span class="line">    while True:</span><br><span class="line">        item&#x3D;q.get()</span><br><span class="line">        # print(type(item))</span><br><span class="line">        if item is None:</span><br><span class="line">            break</span><br><span class="line">        print(&quot;%d customed %d&quot; % (id,item))</span><br><span class="line">        time.sleep(2)</span><br><span class="line">    q.task_done()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    #消息队列</span><br><span class="line">    q&#x3D;queue.Queue()</span><br><span class="line"></span><br><span class="line">    #启动生产者</span><br><span class="line">    for i in range(4):</span><br><span class="line">        threading.Thread(target&#x3D;product,args&#x3D;(i,q)).start()</span><br><span class="line">    #启动消费者</span><br><span class="line">    for i in range(3):</span><br><span class="line">        threading.Thread(target&#x3D;customer,args&#x3D;(i,q)).start()</span><br></pre></td></tr></table></figure>

<h3 id="4-协成"><a href="#4-协成" class="headerlink" title="4. 协成"></a>4. 协成</h3><h5 id="入门-2"><a href="#入门-2" class="headerlink" title="入门"></a>入门</h5><ul>
<li><p>Python协程是通过generator实现的,这就是一个简单的协程</p>
</li>
<li><p>子程序/函数：层级调用，A调用B,B调用C,通过栈实现，调用的顺序明确</p>
</li>
<li><p>协程：看上去也是子程序，但在执行过程中，在子程序内部中可中断，然后转而执行别的子程序</p>
</li>
<li><p>协程实现功能像线程，但是一个线程执行，而不是多个线程调度执行，</p>
</li>
<li><p>协程效率极高，不存在同时写变量的冲突</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def run2():</span><br><span class="line">    data&#x3D;&quot;&quot;</span><br><span class="line">    r&#x3D;yield data</span><br><span class="line">    #第一次send,r&#x3D;None</span><br><span class="line">    print(1,r,data)</span><br><span class="line">    r&#x3D;yield data</span><br><span class="line">    #第二次send,r&#x3D;&quot;hello&quot;</span><br><span class="line">    print(2,r,data)</span><br><span class="line">    r&#x3D;yield data</span><br><span class="line">    #第三次send,r&#x3D;&quot;lingyu&quot;</span><br><span class="line">    print(3,r,data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def run():</span><br><span class="line">    print(1)</span><br><span class="line">    yield 10</span><br><span class="line">    print(2)</span><br><span class="line">    yield 20</span><br><span class="line">    print(3)</span><br><span class="line">    yield 30</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    m&#x3D;run()</span><br><span class="line">    print(type(m))</span><br><span class="line">    print(next(m))</span><br><span class="line">    print(next(m))</span><br><span class="line">    print(next(m))</span><br><span class="line">    #数据传输，run2()实现</span><br><span class="line">    m&#x3D;run2()</span><br><span class="line">    print(m.send(None)) #启动</span><br><span class="line">    print(m.send(&quot;hello&quot;))</span><br><span class="line">    print(m.send(&quot;lingyu&quot;))</span><br></pre></td></tr></table></figure>

<h5 id="协程实现消费者生产者"><a href="#协程实现消费者生产者" class="headerlink" title="协程实现消费者生产者"></a>协程实现消费者生产者</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">def product(m):</span><br><span class="line">    m.send(None)</span><br><span class="line">    for i in range(5):</span><br><span class="line">        print(&quot;product %d&quot; % (i))</span><br><span class="line">        recive&#x3D;m.send(i)</span><br><span class="line">        print(&quot;recive %s from cunstom&quot; % (recive))</span><br><span class="line">    m.close()</span><br><span class="line"></span><br><span class="line">def customer():</span><br><span class="line">    data&#x3D;&quot;&quot;</span><br><span class="line">    while True:</span><br><span class="line">        n&#x3D; yield data</span><br><span class="line">        if n&#x3D;&#x3D;None:</span><br><span class="line">            return</span><br><span class="line">        print(&quot;custome %d&quot; % (n))</span><br><span class="line">        data&#x3D;&quot;200&quot;</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    m&#x3D;customer()</span><br><span class="line">    product(m)</span><br></pre></td></tr></table></figure>

<h1 id="九、正则表达式"><a href="#九、正则表达式" class="headerlink" title="九、正则表达式"></a>九、正则表达式</h1><h3 id="1-re模块"><a href="#1-re模块" class="headerlink" title="1. re模块"></a>1. re模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">re.match(pattern,string,flags&#x3D;0)</span><br><span class="line">patter: 匹配的正则表达式</span><br><span class="line">string: 要匹配的字符串，</span><br><span class="line">flags: 标志位，用于控制正则表达式的匹配方式，例如可以忽略大小写</span><br><span class="line">        值如下：re.I    忽略大小写</span><br><span class="line">               re.M     多行匹配,正则表达式中的^操作符能够将给定字符串的每行当做匹配开始</span><br><span class="line">               re.S     .能匹配所有字符，默认匹配除换行符以外的所有字符</span><br><span class="line">               re.U     根据Unicode字符集解析字符 影响\b等</span><br><span class="line">function: 只从头匹配</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">#www.baidu.com</span><br><span class="line">str1&#x3D;&quot;www.baidu.com&quot;</span><br><span class="line">str2&#x3D;&quot;Www.baidu.com&quot;</span><br><span class="line">str3&#x3D;&quot;baidu.com.www&quot;</span><br><span class="line">print(re.match(&quot;www&quot;,str1))</span><br><span class="line">print(re.match(&quot;www&quot;,str2))</span><br><span class="line">print(re.match(&quot;www&quot;,str3))</span><br><span class="line"></span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">re.search(pattern,string,flags&#x3D;0)</span><br><span class="line"></span><br><span class="line">function: 扫描整个字符串，返回第一个成功的匹配</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br><span class="line">print(re.search(&quot;www&quot;,str1))</span><br><span class="line">print(re.search(&quot;www&quot;,str2))</span><br><span class="line">print(re.search(&quot;www&quot;,str3))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">re.findall(pattern,string,flags&#x3D;0)</span><br><span class="line"></span><br><span class="line">function: 扫描整个字符串，返回所有成功匹配的列表</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line"></span><br><span class="line">str4&#x3D;&quot;www.baidu.www.com&quot;</span><br><span class="line">print(re.findall(&quot;www&quot;,str4))</span><br></pre></td></tr></table></figure>

<h1 id="十、数据库"><a href="#十、数据库" class="headerlink" title="十、数据库"></a>十、数据库</h1><h3 id="1-mysql"><a href="#1-mysql" class="headerlink" title="1. mysql"></a>1. mysql</h3><ul>
<li>连接中出现的问题：<ul>
<li>一开始这个文件的名字不叫“连接测试.py”，而是”pymysql.py”,和包名重名了就会出问题<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#连接数据库</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">参数1：mysql服务所在主机的IP</span><br><span class="line">参数2: 用户名</span><br><span class="line">参数3：密码</span><br><span class="line">参数4：要连接的数据库名</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">db&#x3D;pymysql.connect(&quot;localhost&quot;,&quot;root&quot;, &quot;123456&quot;,&quot;news&quot;)</span><br><span class="line"></span><br><span class="line">title&#x3D;&#39;贵州大学喜报：我馆“书心旅图”项目获“2018年全民阅读优秀案例奖项”&#39;</span><br><span class="line">publicTime&#x3D;&#39;2018-12-03&#39;</span><br><span class="line">publicContent&#x3D;&#39;2018年11月23日&#39;</span><br><span class="line">visitCount&#x3D;&#39;13&#39;</span><br><span class="line">id&#x3D;1</span><br><span class="line">#创建一个cursor对象</span><br><span class="line">cursor&#x3D;db.cursor()</span><br><span class="line">sql&#x3D;&quot;select version()&quot;</span><br><span class="line"></span><br><span class="line">insert&#x3D;&quot;insert into newsapp_newsitem \</span><br><span class="line">        values(&#39;&quot;+str(id)+&quot;&#39;,&#39;&quot;+title+&quot;&#39;,&#39;&quot;+publicTime+&quot;&#39;,&#39;&quot;+publicContent+&quot;&#39;,&#39;&quot;+visitCount+&quot;&#39;);&quot;</span><br><span class="line">cursor.execute(insert)</span><br><span class="line">db.commit()</span><br><span class="line">#执行sql语句</span><br><span class="line">data&#x3D;cursor.execute(sql)</span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line">#断开</span><br><span class="line">cursor.close()</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="十一、网络编程"><a href="#十一、网络编程" class="headerlink" title="十一、网络编程"></a>十一、网络编程</h1><h3 id="1-TCP"><a href="#1-TCP" class="headerlink" title="1. TCP"></a>1. TCP</h3><h5 id="clent"><a href="#clent" class="headerlink" title="clent"></a>clent</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line">client&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">client.connect((&quot;192.168.1.107&quot;,8081))</span><br><span class="line"></span><br><span class="line">count&#x3D;0</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    count +&#x3D; 1</span><br><span class="line">    data &#x3D; input(&quot;请输入给服务器发送的数据：&quot;)</span><br><span class="line">    client.send(data.encode(&quot;utf-8&quot;))</span><br><span class="line">    info &#x3D; client.recv(1024)</span><br><span class="line">    print(&quot;服务器说：&quot;,info.decode(&quot;utf-8&quot;))</span><br></pre></td></tr></table></figure>

<h5 id="server"><a href="#server" class="headerlink" title="server"></a>server</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line">server&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">#绑定IP端口</span><br><span class="line">server.bind((&#39;192.168.1.107&#39;,8081))</span><br><span class="line"></span><br><span class="line">#监听</span><br><span class="line">server.listen(5)</span><br><span class="line">print(&quot;服务器启动成功&quot;)</span><br><span class="line"></span><br><span class="line">#等待连接</span><br><span class="line">client_socket,client_address&#x3D;server.accept()</span><br><span class="line">print(client_socket,&quot;连接成功&quot;,client_address)</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    data&#x3D;client_socket.recv(1024)</span><br><span class="line">    if len(data)&gt;0:</span><br><span class="line">        print(&quot;收到：&quot;,client_address,&quot;的数据：&quot;,data.decode(&quot;utf-8&quot;))</span><br><span class="line">        client_socket.send(&quot;已收到，你好&quot;.encode(&quot;utf-8&quot;))</span><br></pre></td></tr></table></figure>

<h5 id="多个client"><a href="#多个client" class="headerlink" title="多个client"></a>多个client</h5><ul>
<li>之前的只能接受一个client连接,这个可以接受多个client的连接<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">import threading</span><br><span class="line"></span><br><span class="line">server&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">server.bind((&quot;192.168.1.107&quot;,8081))</span><br><span class="line"></span><br><span class="line">server.listen()</span><br><span class="line"></span><br><span class="line">print(&quot;server start sucessfully!&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def deal(sk,address):</span><br><span class="line">    while True:</span><br><span class="line">        data&#x3D;sk.recv(1024).decode(&quot;utf-8&quot;)</span><br><span class="line">        print(&quot;收到&quot;,address,&quot;的消息：&quot;,data)</span><br><span class="line">        sk.send(&quot;已收到&quot;.encode(&quot;utf-8&quot;))</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    client_socket,client_address&#x3D;server.accept()</span><br><span class="line">    t&#x3D;threading.Thread(target&#x3D;deal,args&#x3D;(client_socket,client_address))</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="2-UDP"><a href="#2-UDP" class="headerlink" title="2. UDP"></a>2. UDP</h3><h5 id="client"><a href="#client" class="headerlink" title="client"></a>client</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line">client&#x3D;socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    data&#x3D;input(&quot;请输入：&quot;)</span><br><span class="line">    client.sendto(data.encode(&quot;utf-8&quot;),(&quot;192.168.1.107&quot;,8081))</span><br><span class="line">    data&#x3D;client.recv(1024).decode(&quot;utf-8&quot;)</span><br><span class="line">    print(data)</span><br></pre></td></tr></table></figure>

<h5 id="server-1"><a href="#server-1" class="headerlink" title="server"></a>server</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line">server&#x3D;socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line">server.bind((&quot;192.168.1.107&quot;,8081))</span><br><span class="line"></span><br><span class="line">print(&quot;服务器启动成功&quot;)</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    data,address&#x3D;server.recvfrom(1024)</span><br><span class="line">    print(&quot;收到消息：&quot;,data.decode(&quot;utf-8&quot;))</span><br><span class="line">    server.sendto(&quot;已收到&quot;.encode(&quot;utf-8&quot;),address)</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"><i class="fa fa-tag">python</i></a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/python%E5%9F%BA%E7%A1%80/" rel="prev" title="python基础">
      <i class="fa fa-chevron-left"></i> python基础
    </a></div>
      <div class="post-nav-item">
    <a href="/%E3%80%8A%E7%B2%BE%E9%80%9ADjango%E3%80%8B/" rel="next" title="《精通Django》">
      《精通Django》 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97"><span class="nav-text">一、第三方模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-virtualenv"><span class="nav-text">1. virtualenv</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Tkinter%E5%9B%BE%E5%BD%A2%E5%BA%93"><span class="nav-text">2. Tkinter图形库</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-text">二、文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E8%AF%BB%E6%96%87%E4%BB%B6"><span class="nav-text">1. 读文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%86%99%E6%96%87%E4%BB%B6"><span class="nav-text">2. 写文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%A7%A3%E7%A0%81"><span class="nav-text">3. 编码与解码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%AF%B9%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%AD%98%E5%82%A8%EF%BC%8Cpickle%E6%A8%A1%E5%9D%97"><span class="nav-text">4. 对特殊数据结构的存储，pickle模块</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%97%B6%E9%97%B4%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97"><span class="nav-text">三、时间系统模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-calendar%E6%A8%A1%E5%9D%97"><span class="nav-text">1. calendar模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-datetime%E6%A8%A1%E5%9D%97"><span class="nav-text">2. datetime模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-time%E6%A8%A1%E5%9D%97"><span class="nav-text">3. time模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4"><span class="nav-text">4.</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E3%80%81OS%E6%A8%A1%E5%9D%97"><span class="nav-text">四、OS模块</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E7%B1%BB"><span class="nav-text">五、类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#0-%E7%B1%BB%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-text">0. 类的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%8D%95%E7%BB%A7%E6%89%BF"><span class="nav-text">1. 单继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%A4%9A%E7%BB%A7%E6%89%BF"><span class="nav-text">2. 多继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E4%B8%8E%E7%B1%BB%E5%B1%9E%E6%80%A7"><span class="nav-text">3. 对象属性与类属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">4. 构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="nav-text">5. 析构函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E9%87%8D%E5%86%99str"><span class="nav-text">6. 重写str()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="nav-text">7. 运算符重载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E6%A8%A1%E5%9D%97"><span class="nav-text">六、模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%8C%85"><span class="nav-text">1.包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97"><span class="nav-text">2. 系统模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"><span class="nav-text">3. 自定义模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%98%9F%E5%88%97"><span class="nav-text">2. 队列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%A0%88"><span class="nav-text">3. 栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%8E%92%E5%BA%8F"><span class="nav-text">4. 排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-map-reduce"><span class="nav-text">5. map,reduce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%81%8F%E5%87%BD%E6%95%B0"><span class="nav-text">6. 偏函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-text">7. 装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%B9%BF%E5%BA%A6%E9%81%8D%E5%8E%86"><span class="nav-text">8. 广度遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E6%B7%B1%E5%BA%A6%E9%81%8D%E5%8E%86"><span class="nav-text">9. 深度遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E9%80%92%E5%BD%92%E9%81%8D%E5%8E%86%E7%9B%AE%E5%BD%95"><span class="nav-text">10. 递归遍历目录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E5%A4%9A%E4%BB%BB%E5%8A%A1"><span class="nav-text">八、多任务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%94%A8%E9%80%94"><span class="nav-text">1. 用途</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="nav-text">多任务实现原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B"><span class="nav-text">多进程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="nav-text">多线程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E8%BF%9B%E7%A8%8B"><span class="nav-text">2. 进程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-text">入门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%88%B6%E5%AD%90%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%85%88%E5%90%8E%E9%A1%BA%E5%BA%8F"><span class="nav-text">父子进程的先后顺序</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%9A%E9%80%9A%E8%BF%87%E9%98%9F%E5%88%97%E5%AE%9E%E7%8E%B0"><span class="nav-text">进程间通信：通过队列实现</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E6%B1%A0"><span class="nav-text">进程池</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%9C%A8%E5%A4%9A%E4%B8%AA%E8%BF%9B%E7%A8%8B%E4%B8%AD%E4%BA%92%E4%B8%8D%E5%BD%B1%E5%93%8D"><span class="nav-text">全局变量在多个进程中互不影响</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%B7%B1%E5%B0%81%E8%A3%85%E8%BF%9B%E7%A8%8B"><span class="nav-text">自己封装进程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BA%BF%E7%A8%8B"><span class="nav-text">3. 线程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A5%E9%97%A8-1"><span class="nav-text">入门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%85%B1%E4%BA%AB%E5%8F%98%E9%87%8F"><span class="nav-text">多线程共享变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8A%A0%E9%94%81"><span class="nav-text">加锁</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E7%BA%BF%E7%A8%8B"><span class="nav-text">定时线程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F%E8%B0%83%E5%BA%A6"><span class="nav-text">条件变量调度</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85"><span class="nav-text">生产者消费者</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%8D%8F%E6%88%90"><span class="nav-text">4. 协成</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A5%E9%97%A8-2"><span class="nav-text">入门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8D%8F%E7%A8%8B%E5%AE%9E%E7%8E%B0%E6%B6%88%E8%B4%B9%E8%80%85%E7%94%9F%E4%BA%A7%E8%80%85"><span class="nav-text">协程实现消费者生产者</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">九、正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-re%E6%A8%A1%E5%9D%97"><span class="nav-text">1. re模块</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">十、数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-mysql"><span class="nav-text">1. mysql</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="nav-text">十一、网络编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-TCP"><span class="nav-text">1. TCP</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#clent"><span class="nav-text">clent</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#server"><span class="nav-text">server</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AAclient"><span class="nav-text">多个client</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-UDP"><span class="nav-text">2. UDP</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#client"><span class="nav-text">client</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#server-1"><span class="nav-text">server</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="不知自己无知"
      src="/images/head.jpeg">
  <p class="site-author-name" itemprop="name">不知自己无知</p>
  <div class="site-description" itemprop="description">以阅读为生是一件很酷的事，以写作为生是一件更酷的事。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">57</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">53</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
    <!--
    <div id="music163player">
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=5445280661&auto=0&height=90"></iframe>
       </div>
    -->
  </aside>
  
  
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">不知自己无知</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">346k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">5:14</span>
</div>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='255,255,255' opacity='1' zIndex='-1' count='200' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'Dv4yd2JUuvVhLBe640B6m1jw-gzGzoHsz',
      appKey     : 'sNdrMuVcw6jJzlz0HpXBNhdB',
      placeholder: "来交流交流吧~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":300,"height":600},"mobile":{"show":true},"react":{"opacity":1},"log":false});</script></body>
</html>



